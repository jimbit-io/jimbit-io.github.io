---
title: "Use PowerShell to monitor Windows Defender firewall"
layout: post
category: blog
tags: powershell,windows-firewall
---

I'm trying to think of a proper reason for my first real post to be about Windows Defender Firewall, since I barely ever use it. With network appliances monitoring/analyzers usually available, or even switch ACL's, why ever go through the trouble of using Windows Defender Firewall logs, which are neither viewable in real-time nor formatted in a proper fileformat?

Well... Most of the time there probably isn't a very good reason to. However, it does offer a few advantages;
- You can't get much closer to the source than the OS logging itself. at this level you'll be sure to see if a packet even reaches the system and if so; how is it processed?
- A lot of (enterprise) networks still have their VLAN gateways reside on switch virtual interfaces, sometimes even without ACLs which make it unfriendly to monitor inter-VLAN traffic.
- WireShark will always be a much better choise to monitor incoming or outgoing traffic within an OS'es NIC. However, most sysadmins do not wish to install 3rd party tools on their VM's. Especially tools such as WireShark which can have a negative effect on reliability and performance within a production environment.

As a real-life example, I wanted to backup a WLC's config over TFTP, which defaults to UDP/69. There file wouldn't upload to the TFTP server and since both hosts were on the same subnet, chances were that Defender Firewall blocked the incoming traffic.

So let's confirm, right? For this I created a PowerShell script which makes it easier to go through the logs...

readmore
